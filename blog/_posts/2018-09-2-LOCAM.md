---
layout: post
title: Legends of Code & Magic - a Codingame contest
---

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-145347384-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-145347384-1');
</script>

# Codingame

Codingame is a website where you can solve puzzles, work on optimization problems, and build bots for games. You have access to a huge range of codding languages, and I personally mainly used Java. According to the puzzles you solve, your ranking in the multiplayer games and in the contests, you get a global ranking on the website. I mainly worked on multiplayer pluzzles : creation of bots for several games : a card game, a quidditch match, a tron battle, etc.

![quidditch]({{ site.url }}/imgs/2018-09-02-LOCAM/quidditch.png)

<center>
<em>
<a href="https://www.codingame.com/multiplayer/bot-programming/fantastic-bits">A quidditch game</a> from Codingame where your AI controls 2 players. This is a great game that includes great AI and physics.
 </em>
 </center>

 ![csb]({{ site.url }}/imgs/2018-09-02-LOCAM/csb.png)

 <center>
 <em>
<a href="https://www.codingame.com/multiplayer/bot-programming/coders-strike-back">A game inspired from Star Wars</a> wheere you control 2 pods. You can learn a lot about several algorithms: genetic algorithms, MCTS, minmax, etc.
  </em>
  </center>

# Legends of Code & Magic (LOCAM)

## The game

This is a [game](https://www.codingame.com/multiplayer/bot-programming/legends-of-code-magic) created by [Jakub Kowalski and Rados≈Çaw Miernik](https://jakubkowalski.tech/Projects/LOCM/), in cooperation with Codingame . This is a card game, opposing two players. The game is turn based, zero-sum, and without a possibility to tie. It is important to note that you only have 100ms to play each turn. The game is separated in two parts :

* First, you have to draw 30 cards from a pool of 160 cards. During 30 turns, the game will propose 3 cards, and you choose the one you want.
* After that, each player will play. Several actions are available : attack with your cards, use items, invock cards with the available mana.
* The game will end whenever someone's hp drop to zero.

![locam-1]({{ site.url }}/imgs/2018-09-02-LOCAM/locam-1.png)

<center>
<em>
Overview of the game, with both players HP, mana, cards in hand and cards on the board.
</em>
</center>

## The rules

We can split the game into several components : Card drawing, Mana, Creatures and Items.

* Card drawing : Player1 starts with 4 cards, while Player2 starts with 5 cards. Each turn, you can draw a new card. Some Creatures or Items can make you draw more than one card pear turn.

* Mana : You can only use a card if you have enough mana for the specific card. Player1 starts with 1 mana, Player2 starts with 2. You gain one point of mana for each turn you play, until you reach 12 mana.

* Creatures : Creatures have a mana cost, attack points and defense points. Some creatures start with certain abilities. By default, creatures can't attack the turn they are summoned, and they can attack once per turn only. When a creature attacks another one, they both deal damage equals to their attack to the defense of the other creature. When a creature attacks the opponent, it deals damage equals to its attack to the HP of the opponent. Creatures can also have different abilities, we will list them below.

* Items : When played, items have an immediate and permanent effect on the board or on the players. They can modify the attack or defense of a creature, add or remove abilities. They can also damage or heal the opponent and you. You can find 3 types of items : green items (positiv effect on your creatures), red items (negativ effect of the opponent's creatures) and blue items (can target yourself or the opponent directly).

As for the six special abilities :

* Breakthrough: Creatures with Breakthrough can deal extra damage to the opponent when they attack enemy creatures. If their attack damage is greater than the defending creature's defense, the excess damage is dealt to the opponent.

* Charge: Creatures with Charge can attack the turn they are summoned.

* Ward: Creatures with Ward ignore once the next damage they would receive from any source. The "shield" given by the Ward ability is then lost.

* Lethal: Creatures with Lethal kill the creatures they deal damage to.

* Guard: Enemy creatures must attack creatures with Guard first.

* Drain: Creatures with Drain heal the player of the amount of the damage they deal (when attacking only).

# My bot

I split my bot into 4 different parts. The first one will take carft of the drafting phase. It is basically an hardcode evluation of every card from the game. The second one is how you choose which card you'll summon. Here, I used a Monte-carlo algorithm (MC), with an evaluation function. The third part needs you to decide which card will atack who.

Again, I combined an MC with a MinMax algorithm. Finally, the last part is the heuristic I used. Every part of my code is using heuristic and pruning to help my code take better decisions, since it is mainly based on chance.

You only have a limited amount of time when you play :

<table>
  <thead>
    <tr>
      <th>Actions</th>
      <th>Allocated time</th>
    </tr>
  </thead>
  <tfoot>
    <tr>
    <td>Response time per turn</td>
    <td> 100ms </td>
    </tr>
  </tfoot>
  <tbody>
  <tr>
    <td>Response time for the first draft turn</td>
    <td>1000ms</td>
  </tr>
    <tr>
      <td>Response time for the first battle turn</td>
      <td>1000ms</td>
    </tr>
  </tbody>
</table>

## Monte Carlo


## MCTS

## Draft phase

## Playing phase

### Summoning phase

### Attacking phase

# Conclusion


# References
